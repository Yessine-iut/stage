{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dofla\\\\Desktop\\\\Stage\\\\propaganda\\\\src\\\\pages\\\\service1_1.js\";\nimport React from 'react'; //import {Reponse} from '../components/textInput'\n\nimport data from \"../json/jsonmockV4.json\";\nimport \"../styles/service1_1.css\";\nimport Button from '../components/button';\nimport Multiplechkbox from '../components/MultipleChkbox';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Service1_1 = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"res\",\n        style: {\n          position: 'absolute',\n          right: '15%'\n        },\n        children: [texte2(), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"btn\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                position: 'relative',\n                left: '50%',\n                marginTop: '2em'\n              },\n              children: \"back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 23,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          left: '80%'\n        },\n        children: /*#__PURE__*/_jsxDEV(Multiplechkbox, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 7\n  }, this);\n};\n\n_c = Service1_1;\n\nfunction texte2() {\n  let propagandas = [\"Appeal_to_Authority\", \"Appeal_to_fear-prejudice\", \"Bandwagon,Reductio_ad_hitlerum\", \"Black-and-White_Fallacy\", \"Causal_Oversimplification\", \"Doubt\", \"Exaggeration,Minimisation\", \"Flag-Waving\", \"Loaded_Language\", \"Name_Calling,Labeling\", \"Repetition\", \"Slogans\", \"Thought-terminating_Cliches\", \"Whataboutism,Straw_Men,Red_Herring\"];\n  let spans = [];\n  let res = []; // let taillePropaganda=0;\n\n  let tailleSpan = 0;\n  let text = \"\";\n\n  for (let i in data.article701225819) {\n    // }\n    //Pour chaque propagande\n    //for(let i=1;i<taillePropaganda+1;i++){\n    for (let j in data.article701225819[i]) {\n      j = j - 1;\n      j = j + 1;\n      tailleSpan++;\n    }\n\n    text = data.article701225819[i].text;\n\n    for (let v = 1; v < tailleSpan; v++) {\n      spans.push(data.article701225819[i][\"span_\" + v]);\n    }\n\n    spans.sort(function compare(a, b) {\n      if (typeof a.start_char !== 'object' && typeof b.start_char !== 'object') {\n        if (a.start_char < b.start_char) return -1;\n        if (a.start_char > b.start_char) return 1;\n        return 0;\n      } else if (typeof a.start_char === 'object' && typeof b.start_char !== 'object') {\n        if (a.start_char[0] < b.start_char) return -1;\n        if (a.start_char[0] > b.start_char) return 1;\n        return 0;\n      } else if (typeof a.start_char !== 'object' && typeof b.start_char === 'object') {\n        if (a.start_char < b.start_char[0]) return -1;\n        if (a.start_char > b.start_char[0]) return 1;\n        return 0;\n      } else if (typeof a.start_char === 'object' && typeof b.start_char === 'object') {\n        if (a.start_char[0] < b.start_char[0]) return -1;\n        if (a.start_char[0] > b.start_char[0]) return 1;\n        return 0;\n      }\n    });\n    console.log(spans[1]);\n    let curseur = 0;\n\n    for (let v = 0; v < spans.length; v++) {\n      let spanCourant = spans[v];\n      let spanText = spans[v].span; //console.log(spanText)\n      //1 span par phrase\n\n      if (tailleSpan - 1 === 1) {\n        res.push(text.substring(0, spanCourant.start_char));\n        let id = \"propaganda\" + spans[v].label;\n        let label1 = [];\n        label1.push(spans[v].label);\n        let title = propagandas[spans[v].label - 1] + \"\\nProbability: \" + spans[v].probability;\n        res.push( /*#__PURE__*/_jsxDEV(\"mark\", {\n          id: id,\n          labels: label1,\n          title: title,\n          title2: title,\n          children: spanText\n        }, v + id + label1 + title, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 18\n        }, this));\n        res.push(text.substring(spanCourant.end_index, text.length) + \" \");\n      } else {\n        //On regarde si Ã§a se chevauche\n        let over = 0;\n        console.log(\"labels\" + spanCourant.label);\n\n        if (typeof spanCourant.label === 'object') {\n          let SpansOverlap = [];\n          SpansOverlap.push(spanCourant);\n          let p = v;\n\n          while (p < tailleSpan) {\n            SpansOverlap.push(spans[p]);\n            p++;\n          }\n\n          console.log(\"overlap\");\n          /*SpansOverlap.push(spanCourant)\r\n          SpansOverlap.push(spanSuivant)*/\n\n          console.log(\"CURSEUR \" + curseur);\n          console.log(\"taille du texte\" + text.length);\n          intervalles(SpansOverlap, text, res, curseur);\n          over = 1;\n          v = tailleSpan;\n        }\n\n        if (over !== 1) {\n          over = 0;\n          let id = \"propaganda\" + spanCourant.label; //console.log(text.substring(curseur,spanCourant))\n          //console.log(text)\n\n          let label1 = [];\n          label1.push(spanCourant.label);\n          let title = propagandas[spans[v].label - 1] + \"\\nProbability: \" + spans[v].probability;\n          res.push(text.substring(curseur, spanCourant.start_char));\n          res.push( /*#__PURE__*/_jsxDEV(\"mark\", {\n            id: id,\n            labels: label1,\n            title: title,\n            title2: title,\n            children: [spanCourant.span, \" \"]\n          }, v + id + label1 + title, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 20\n          }, this));\n          curseur = spanCourant.end_index;\n        }\n      }\n    }\n\n    curseur = 0;\n    tailleSpan = 0;\n    spans.splice(0, spans.length);\n  }\n\n  return res; // console.log(data.article701225819[propagandas[0]][\"span_1\"].probability);\n  //console.log(data[0].span_1)\n}\n/*function duplicateSpan(tab,span){\r\n  for(let i=0;i<tab.length;i++){\r\n    if(tab[i]===span){\r\n      return true;\r\n    }\r\n  }\r\n \r\n}*/\n\n\nfunction overlap(span1, span2) {\n  if (span2.start_char >= span1.start_char && span2.start_char <= span1.end_index || span2.end_index >= span1.start_char && span2.end_index <= span1.end_index) {\n    return true;\n  }\n}\n\nfunction intervalles(spans, texte, res, curseur) {\n  let inter = [];\n  console.log(\"debut \" + spans.start_char);\n  console.log(\"label svp \" + typeof spans[0].label);\n  console.log(\"label svp \" + typeof spans[1].label);\n  /*for(let j=0;j<spans.length;j++){\r\n    \r\n    if(typeof(spans[j].label)===\"object\"){\r\n   for(let i=0;i<spans[j].label.length;i++){\r\n     inter.push(spans[j].start_char[i])\r\n     inter.push(spans[j].end_index[i])\r\n   }\r\n  }else{\r\n   inter.push(spans[j].start_char)\r\n   inter.push(spans[j].end_index)\r\n  }\r\n  }*/\n\n  const byValue = (a, b) => a - b;\n\n  const sorted = [...inter].sort(byValue); //console.log(\"TEXTE \"+texte)\n  //console.log(\"TEST2 \"+sorted[0])\n\n  res.push(texte.substring(curseur, sorted[0])); //console.log(\"TEST \"+texte.substring(curseur,spans[0].start_char))\n\n  curseur = sorted[0];\n  let labels1 = [];\n\n  for (let i = 1; i < sorted.length; i++) {\n    labels1 = labels(spans, curseur + 1); //console.log(\"CURSEUR +1 \"+(curseur+1))\n\n    if (labels1.length === 1) {\n      let id = \"propaganda\" + labels1[0];\n\n      if (curseur !== sorted[i]) {\n        res.push( /*#__PURE__*/_jsxDEV(\"mark\", {\n          id: id,\n          labels: labels(spans, curseur + 1),\n          children: texte.substring(curseur, sorted[i])\n        }, id + labels(spans, curseur + 1), false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 18\n        }, this));\n      }\n    } else if (labels1.length === 0) {\n      res.push(texte.substring(curseur, sorted[i]));\n    } else {\n      let id = \"propaganda\" + 99;\n\n      if (curseur !== sorted[i]) {\n        console.log(labels1);\n        res.push( /*#__PURE__*/_jsxDEV(\"mark\", {\n          id: id,\n          labels: labels(spans, curseur + 1),\n          children: texte.substring(curseur, sorted[i])\n        }, id + labels(spans, curseur + 1), false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 18\n        }, this));\n      }\n    }\n\n    curseur = sorted[i];\n    labels1.splice(0, labels1.length);\n  }\n\n  labels1 = labels(spans, curseur + 1);\n\n  if (labels1.length === 0) {\n    res.push(texte.substring(curseur, texte.length));\n  } else if (labels1.length === 1) {\n    let id = \"propaganda\" + labels1[0];\n    res.push( /*#__PURE__*/_jsxDEV(\"mark\", {\n      id: id,\n      labels: labels(spans, curseur + 1),\n      title: \"test\",\n      children: texte.substring(curseur, texte.length)\n    }, id + labels(spans, curseur + 1), false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 14\n    }, this));\n  } else {\n    let id = \"propaganda\" + 99;\n    res.push( /*#__PURE__*/_jsxDEV(\"mark\", {\n      id: id,\n      labels: labels(spans, curseur + 1),\n      title: \"test\",\n      children: texte.substring(curseur, texte.length)\n    }, id + labels(spans, curseur + 1), false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 14\n    }, this));\n  }\n}\n/*function labels(spans,curseur){\r\n  let labels=[]\r\n  for(let i=0;i<spans.length;i++){\r\n    if(curseur>=spans[i].start_char && curseur<=spans[i].end_index){\r\n      labels.push(spans[i].label)\r\n    }\r\n  }\r\n  return labels;\r\n}*/\n\n\nfunction labels(spans, curseur) {\n  let labels = [];\n\n  if (typeof spans.label === 'object') {\n    for (let i = 0; i < spans.label.length; i++) {\n      if (curseur >= spans.start_char[i] && curseur <= spans.end_index[i]) {\n        labels.push(spans.label[i]);\n      }\n    }\n\n    return labels;\n  } else {\n    labels.push(0);\n    return labels;\n  }\n}\n\nexport default Service1_1;\n\nvar _c;\n\n$RefreshReg$(_c, \"Service1_1\");","map":{"version":3,"sources":["C:/Users/dofla/Desktop/Stage/propaganda/src/pages/service1_1.js"],"names":["React","data","Button","Multiplechkbox","Link","Service1_1","position","right","texte2","left","marginTop","propagandas","spans","res","tailleSpan","text","i","article701225819","j","v","push","sort","compare","a","b","start_char","console","log","curseur","length","spanCourant","spanText","span","substring","id","label","label1","title","probability","end_index","over","SpansOverlap","p","intervalles","splice","overlap","span1","span2","texte","inter","byValue","sorted","labels1","labels"],"mappings":"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","sourcesContent":["import React from 'react';\r\n//import {Reponse} from '../components/textInput'\r\nimport data from \"../json/jsonmockV4.json\"\r\nimport \"../styles/service1_1.css\"\r\nimport Button from '../components/button';\r\nimport Multiplechkbox from '../components/MultipleChkbox';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\n\r\nconst Service1_1 = () => {\r\n    return (\r\n      <div\r\n>\r\n        <div>\r\n    \r\n        \r\n      <div id=\"res\" style={{\r\n      position: 'absolute',\r\n      right:'15%',\r\n      }}>{texte2()} \r\n      <div id=\"btn\">\r\n      <Link to=\"/\" ><Button style={{\r\n        \r\n        position: 'relative',\r\n        left: '50%',\r\n        marginTop:'2em'\r\n        \r\n        \r\n      }}>back</Button>\r\n      </Link>\r\n      \r\n      </div>\r\n         \r\n\r\n      </div> \r\n      <div style={{\r\n        \r\n        position: 'absolute',\r\n        left: '80%',      \r\n        \r\n      }}>\r\n           <Multiplechkbox/>\r\n         </div>\r\n         { /* <mark>test</mark>*/}\r\n      </div>\r\n      \r\n    </div>\r\n    );\r\n  };\r\n  \r\n  \r\nfunction texte2(){\r\n  let propagandas=[\"Appeal_to_Authority\",\"Appeal_to_fear-prejudice\",\"Bandwagon,Reductio_ad_hitlerum\",\"Black-and-White_Fallacy\",\"Causal_Oversimplification\",\"Doubt\",\"Exaggeration,Minimisation\",\"Flag-Waving\",\"Loaded_Language\",\"Name_Calling,Labeling\",\"Repetition\",\"Slogans\",\"Thought-terminating_Cliches\",\"Whataboutism,Straw_Men,Red_Herring\"]\r\n  let spans=[]\r\n  let res=[]\r\n // let taillePropaganda=0;\r\n  let tailleSpan=0;\r\n  let text=\"\"\r\n  for(let i in data.article701225819){\r\n // }\r\n  //Pour chaque propagande\r\n  //for(let i=1;i<taillePropaganda+1;i++){\r\n    for(let j in data.article701225819[i]){\r\n      j=j-1\r\n      j=j+1\r\n      tailleSpan++;\r\n    }\r\n    text=data.article701225819[i].text\r\n    for(let v=1;v<tailleSpan;v++){\r\n      spans.push(data.article701225819[i][\"span_\"+v])\r\n\r\n    }\r\n    spans.sort(function compare(a, b) {\r\n      if(typeof(a.start_char)!=='object'&& typeof(b.start_char)!=='object'){\r\n\r\n     \r\n      if (a.start_char < b.start_char )\r\n         return -1;\r\n      if (a.start_char > b.start_char )\r\n         return 1;\r\n      return 0;\r\n    }\r\n    else if (typeof(a.start_char)==='object' && typeof(b.start_char)!=='object'){\r\n      if (a.start_char[0] < b.start_char )\r\n      return -1;\r\n   if (a.start_char[0] > b.start_char )\r\n      return 1;\r\n   return 0;\r\n    }\r\n    else if(typeof(a.start_char)!=='object' && typeof(b.start_char)==='object'){\r\n      if (a.start_char < b.start_char[0] )\r\n      return -1;\r\n   if (a.start_char> b.start_char[0] )\r\n      return 1;\r\n   return 0;\r\n    }\r\n    else if(typeof(a.start_char)==='object' && typeof(b.start_char)==='object'){\r\n      if (a.start_char[0] < b.start_char[0] )\r\n      return -1;\r\n   if (a.start_char[0]> b.start_char[0] )\r\n      return 1;\r\n   return 0;\r\n    }\r\n    }); \r\n    console.log(spans[1])\r\n    let curseur=0;\r\n    for(let v=0;v<spans.length;v++){\r\n      let spanCourant=spans[v]\r\n      let spanText=spans[v].span\r\n      //console.log(spanText)\r\n      //1 span par phrase\r\n      if(tailleSpan-1===1){\r\n        res.push(text.substring(0,spanCourant.start_char))\r\n        let id=\"propaganda\"+spans[v].label\r\n        let label1=[]\r\n        label1.push(spans[v].label)\r\n        let title=propagandas[spans[v].label-1]+\"\\nProbability: \"+spans[v].probability\r\n        res.push(<mark key={v+id+label1+title} id={id} labels={label1} title={title} title2={title}>{spanText}</mark>)\r\n        res.push(text.substring(spanCourant.end_index,text.length)+\" \")\r\n\r\n      }else{\r\n        //On regarde si Ã§a se chevauche\r\n        let over=0;\r\n        \r\n          console.log(\"labels\" +spanCourant.label)\r\n          if(typeof(spanCourant.label)==='object'){\r\n            let SpansOverlap=[]\r\n            SpansOverlap.push(spanCourant)\r\n            let p=v;\r\n            while(p<tailleSpan){\r\n              SpansOverlap.push(spans[p])\r\n              p++;\r\n            }\r\n            console.log(\"overlap\")\r\n             /*SpansOverlap.push(spanCourant)\r\n             SpansOverlap.push(spanSuivant)*/\r\n             \r\n           \r\n          \r\n        \r\n            console.log(\"CURSEUR \"+curseur)\r\n            console.log(\"taille du texte\"+text.length)\r\n            intervalles(SpansOverlap,text,res,curseur);\r\n\r\n\r\n            over=1;\r\n            v=tailleSpan\r\n          }\r\n         \r\n          \r\n\r\n        \r\n        if(over!==1){\r\n          over=0;\r\n          let id=\"propaganda\"+spanCourant.label\r\n          //console.log(text.substring(curseur,spanCourant))\r\n          //console.log(text)\r\n          let label1=[]\r\n          label1.push(spanCourant.label)\r\n          let title=propagandas[spans[v].label-1]+\"\\nProbability: \"+spans[v].probability\r\n\r\n          res.push(text.substring(curseur,spanCourant.start_char))\r\n          res.push(<mark key={v+id+label1+title} id={id} labels={label1} title={title} title2={title}>{spanCourant.span} </mark>)\r\n          curseur=spanCourant.end_index;\r\n        }\r\n      }\r\n    }\r\n    \r\n    curseur=0;\r\n    tailleSpan=0;\r\n    spans.splice(0,spans.length)\r\n  }\r\n  return res;\r\n // console.log(data.article701225819[propagandas[0]][\"span_1\"].probability);\r\n\r\n        \r\n  //console.log(data[0].span_1)\r\n}\r\n\r\n  \r\n  \r\n  /*function duplicateSpan(tab,span){\r\n    for(let i=0;i<tab.length;i++){\r\n      if(tab[i]===span){\r\n        return true;\r\n      }\r\n    }\r\n   \r\n  }*/\r\n  function overlap(span1,span2){\r\n      if((span2.start_char>=span1.start_char && span2.start_char<=span1.end_index)||(span2.end_index>=span1.start_char && span2.end_index<=span1.end_index)){\r\n        return true;\r\n      }\r\n\r\n  }\r\n  function intervalles(spans,texte,res,curseur){\r\n   let inter=[]\r\n   console.log(\"debut \"+spans.start_char)\r\n   console.log(\"label svp \"+typeof(spans[0].label))\r\n   console.log(\"label svp \"+typeof(spans[1].label))\r\n\r\n   /*for(let j=0;j<spans.length;j++){\r\n     \r\n     if(typeof(spans[j].label)===\"object\"){\r\n    for(let i=0;i<spans[j].label.length;i++){\r\n      inter.push(spans[j].start_char[i])\r\n      inter.push(spans[j].end_index[i])\r\n    }\r\n  }else{\r\n    inter.push(spans[j].start_char)\r\n    inter.push(spans[j].end_index)\r\n  }\r\n   }*/\r\n  \r\n   const byValue = (a,b) => a - b;\r\n   const sorted=[...inter].sort(byValue);\r\n   //console.log(\"TEXTE \"+texte)\r\n   //console.log(\"TEST2 \"+sorted[0])\r\n   res.push(texte.substring(curseur,sorted[0]))\r\n   //console.log(\"TEST \"+texte.substring(curseur,spans[0].start_char))\r\n   curseur=sorted[0];\r\n   let labels1=[]\r\n   \r\n   for(let i=1;i<sorted.length;i++){\r\n    labels1=labels(spans,curseur+1);\r\n\r\n    \r\n    //console.log(\"CURSEUR +1 \"+(curseur+1))\r\n    if(labels1.length===1){\r\n      let id=\"propaganda\"+labels1[0];\r\n      if(curseur!==sorted[i]){\r\n\r\n        res.push(<mark key={id+labels(spans,curseur+1)} id={id} labels={labels(spans,curseur+1)}>{texte.substring(curseur,sorted[i])}</mark>)\r\n\r\n      }\r\n    }else if(labels1.length===0){\r\n      res.push(texte.substring(curseur,sorted[i]))\r\n\r\n    }\r\n    else{\r\n      \r\n      let id=\"propaganda\"+99;\r\n      if(curseur!==sorted[i]){\r\n        console.log(labels1)\r\n        res.push(<mark key={id+labels(spans,curseur+1)} id={id} labels={labels(spans,curseur+1)} >{texte.substring(curseur,sorted[i])}</mark>)\r\n\r\n      }\r\n      \r\n\r\n    }\r\n    curseur=sorted[i];\r\n    labels1.splice(0,labels1.length)\r\n\r\n   }\r\n   labels1=labels(spans,curseur+1);\r\n   if(labels1.length===0){\r\n     res.push(texte.substring(curseur,texte.length))\r\n   }else if(labels1.length===1){\r\n    let id=\"propaganda\"+labels1[0];\r\n\r\n    res.push(<mark key={id+labels(spans,curseur+1)} id={id} labels={labels(spans,curseur+1)} title=\"test\">{texte.substring(curseur,texte.length)}</mark>)\r\n   }else{\r\n    let id=\"propaganda\"+99;\r\n\r\n    res.push(<mark key={id+labels(spans,curseur+1)} id={id} labels={labels(spans,curseur+1)} title=\"test\">{texte.substring(curseur,texte.length)}</mark>)\r\n   }\r\n  }\r\n\r\n  /*function labels(spans,curseur){\r\n    let labels=[]\r\n    for(let i=0;i<spans.length;i++){\r\n      if(curseur>=spans[i].start_char && curseur<=spans[i].end_index){\r\n        labels.push(spans[i].label)\r\n      }\r\n    }\r\n    return labels;\r\n  }*/\r\n  function labels(spans,curseur){\r\n    let labels=[]\r\n    if(typeof(spans.label)==='object'){\r\n\r\n    \r\n    for(let i=0;i<spans.label.length;i++){\r\n      if(curseur>=spans.start_char[i] && curseur<=spans.end_index[i]){\r\n        labels.push(spans.label[i])\r\n      }\r\n    }\r\n    return labels;\r\n  }\r\n  else{\r\n    labels.push(0)\r\n    return labels;\r\n  }\r\n  }\r\n  export default Service1_1;\r\n"]},"metadata":{},"sourceType":"module"}
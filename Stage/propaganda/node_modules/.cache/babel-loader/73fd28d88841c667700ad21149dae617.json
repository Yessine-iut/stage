{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/dofla/Desktop/Stage/propaganda/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _d3Cloud = _interopRequireDefault(require(\"d3-cloud\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _d3Selection = require(\"d3-selection\");\n\nvar _uuid = require(\"uuid\");\n\nvar _defaultMappers = require(\"./defaultMappers\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar WordCloud = /*#__PURE__*/(0, _react.forwardRef)(function (props, ref) {\n  WordCloud.propTypes = {\n    data: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n      text: _propTypes[\"default\"].string.isRequired,\n      value: _propTypes[\"default\"].number.isRequired\n    })).isRequired,\n    font: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func]),\n    fontSizeMapper: _propTypes[\"default\"].func,\n    height: _propTypes[\"default\"].number,\n    padding: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].func]),\n    rotate: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].func]),\n    width: _propTypes[\"default\"].number,\n    onWordClick: _propTypes[\"default\"].func,\n    onWordMouseOut: _propTypes[\"default\"].func,\n    onWordMouseOver: _propTypes[\"default\"].func,\n    defaultColor: _propTypes[\"default\"].string,\n    formatImgDownload: _propTypes[\"default\"].string\n  };\n  var svgRef = (0, _react.useRef)();\n  var className = \"word-cloud-text-chart\".concat((0, _uuid.v4)());\n  var defaultProps = {\n    width: 700,\n    height: 600,\n    padding: 5,\n    font: \"serif\",\n    fontSizeMapper: _defaultMappers.defaultFontSizeMapper,\n    rotate: 0,\n    onWordClick: null,\n    onWordMouseOver: null,\n    onWordMouseOut: null,\n    formatImgDownload: \"png\",\n    defaultColor: \"#333\"\n  };\n  var data = props.data,\n      width = props.width,\n      height = props.height,\n      padding = props.padding,\n      font = props.font,\n      fontSizeMapper = props.fontSizeMapper,\n      rotate = props.rotate,\n      onWordClick = props.onWordClick,\n      onWordMouseOver = props.onWordMouseOver,\n      onWordMouseOut = props.onWordMouseOut,\n      defaultColor = props.defaultColor,\n      formatImgDownload = props.formatImgDownload;\n\n  var fillColor = function fillColor(d, i) {\n    return d.color ? d.color : defaultColor || defaultProps.defaultColor;\n  };\n\n  var fontWeight = function fontWeight(d, i) {\n    return d.fontWeight ? d.fontWeight : \"normal\";\n  };\n\n  var layout = (0, _d3Cloud[\"default\"])().size([width || defaultProps.width, height || defaultProps.height]).font(font || defaultProps.font).words(data).padding(padding || defaultProps.padding).rotate(rotate || defaultProps.rotate).fontSize(fontSizeMapper).on(\"end\", function (words) {\n    var texts = (0, _d3Selection.select)(\"div.\".concat(className)).append(\"svg\").attr(\"width\", layout.size()[0]).attr(\"height\", layout.size()[1]).append(\"g\").attr(\"transform\", \"translate(\".concat(layout.size()[0] / 2, \",\").concat(layout.size()[1] / 2, \")\")).selectAll(\"text\").data(words).enter().append(\"text\").style(\"font-size\", function (d) {\n      return \"\".concat(d.size, \"px\");\n    }).style(\"font-family\", font).style(\"fill\", fillColor).style(\"font-weight\", fontWeight).attr(\"text-anchor\", \"middle\").attr(\"transform\", function (d) {\n      return \"translate(\".concat([d.x, d.y], \")rotate(\").concat(d.rotate, \")\");\n    }).text(function (d) {\n      return d.text;\n    });\n\n    if (onWordClick) {\n      texts.on(\"click\", onWordClick);\n    }\n\n    if (onWordMouseOver) {\n      texts.on(\"mouseover\", onWordMouseOver);\n    }\n\n    if (onWordMouseOut) {\n      texts.on(\"mouseout\", onWordMouseOut);\n    }\n  });\n  (0, _react.useEffect)(function () {\n    layout.start();\n  }, [data]); // convert svg to base64 image\n\n  var loadPngData = function loadPngData(_ref) {\n    var context = _ref.context,\n        dataImg = _ref.dataImg,\n        format = _ref.format,\n        canvas = _ref.canvas;\n    return new Promise(function (resolve, reject) {\n      var image = new Image();\n\n      image.onload = function () {\n        context.clearRect(0, 0, width || defaultProps.width, height || defaultProps.height);\n        context.drawImage(image, 0, 0, width || defaultProps.width, height || defaultProps.height);\n        var pngData = canvas.toDataURL(\"image/\" + format);\n        return resolve(pngData);\n      };\n\n      image.src = dataImg;\n    });\n  };\n\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      toBase64Image: function toBase64Image() {\n        return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var format, imgString, dataImg, canvas, context, data;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  format = formatImgDownload ? formatImgDownload : defaultProps.formatImgDownload;\n                  imgString = new XMLSerializer().serializeToString(svgRef.current.querySelector(\"svg\"));\n                  dataImg = \"data:image/svg+xml;base64,\".concat(window.btoa(imgString));\n                  canvas = document.createElement(\"canvas\");\n                  context = canvas.getContext(\"2d\");\n                  canvas.width = width || defaultProps.width;\n                  canvas.height = height || defaultProps.height;\n                  _context.next = 9;\n                  return loadPngData({\n                    dataImg: dataImg,\n                    context: context,\n                    format: format,\n                    canvas: canvas\n                  });\n\n                case 9:\n                  data = _context.sent;\n                  return _context.abrupt(\"return\", data);\n\n                case 11:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))();\n      }\n    };\n  }); // render based on new data\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: className,\n    ref: svgRef\n  });\n});\nvar _default = WordCloud;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/dofla/Desktop/Stage/propaganda/node_modules/@nhuson/react-d3-cloud/lib/WordCloud.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","_propTypes","_interopRequireDefault","require","_d3Cloud","_react","_interopRequireWildcard","_d3Selection","_uuid","_defaultMappers","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","WordCloud","forwardRef","props","ref","propTypes","data","arrayOf","shape","text","string","isRequired","number","font","oneOfType","func","fontSizeMapper","height","padding","rotate","width","onWordClick","onWordMouseOut","onWordMouseOver","defaultColor","formatImgDownload","svgRef","useRef","className","concat","v4","defaultProps","defaultFontSizeMapper","fillColor","d","i","color","fontWeight","layout","size","words","fontSize","on","texts","select","append","attr","selectAll","enter","style","x","y","useEffect","start","loadPngData","_ref","context","dataImg","format","canvas","image","Image","onload","clearRect","drawImage","pngData","toDataURL","src","useImperativeHandle","toBase64Image","mark","_callee","imgString","wrap","_callee$","_context","prev","next","XMLSerializer","serializeToString","current","querySelector","window","btoa","document","createElement","getContext","sent","abrupt","stop","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _d3Cloud = _interopRequireDefault(require(\"d3-cloud\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _d3Selection = require(\"d3-selection\");\n\nvar _uuid = require(\"uuid\");\n\nvar _defaultMappers = require(\"./defaultMappers\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar WordCloud = /*#__PURE__*/(0, _react.forwardRef)(function (props, ref) {\n  WordCloud.propTypes = {\n    data: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].shape({\n      text: _propTypes[\"default\"].string.isRequired,\n      value: _propTypes[\"default\"].number.isRequired\n    })).isRequired,\n    font: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func]),\n    fontSizeMapper: _propTypes[\"default\"].func,\n    height: _propTypes[\"default\"].number,\n    padding: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].func]),\n    rotate: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].number, _propTypes[\"default\"].func]),\n    width: _propTypes[\"default\"].number,\n    onWordClick: _propTypes[\"default\"].func,\n    onWordMouseOut: _propTypes[\"default\"].func,\n    onWordMouseOver: _propTypes[\"default\"].func,\n    defaultColor: _propTypes[\"default\"].string,\n    formatImgDownload: _propTypes[\"default\"].string\n  };\n  var svgRef = (0, _react.useRef)();\n  var className = \"word-cloud-text-chart\".concat((0, _uuid.v4)());\n  var defaultProps = {\n    width: 700,\n    height: 600,\n    padding: 5,\n    font: \"serif\",\n    fontSizeMapper: _defaultMappers.defaultFontSizeMapper,\n    rotate: 0,\n    onWordClick: null,\n    onWordMouseOver: null,\n    onWordMouseOut: null,\n    formatImgDownload: \"png\",\n    defaultColor: \"#333\"\n  };\n  var data = props.data,\n      width = props.width,\n      height = props.height,\n      padding = props.padding,\n      font = props.font,\n      fontSizeMapper = props.fontSizeMapper,\n      rotate = props.rotate,\n      onWordClick = props.onWordClick,\n      onWordMouseOver = props.onWordMouseOver,\n      onWordMouseOut = props.onWordMouseOut,\n      defaultColor = props.defaultColor,\n      formatImgDownload = props.formatImgDownload;\n\n  var fillColor = function fillColor(d, i) {\n    return d.color ? d.color : defaultColor || defaultProps.defaultColor;\n  };\n\n  var fontWeight = function fontWeight(d, i) {\n    return d.fontWeight ? d.fontWeight : \"normal\";\n  };\n\n  var layout = (0, _d3Cloud[\"default\"])().size([width || defaultProps.width, height || defaultProps.height]).font(font || defaultProps.font).words(data).padding(padding || defaultProps.padding).rotate(rotate || defaultProps.rotate).fontSize(fontSizeMapper).on(\"end\", function (words) {\n    var texts = (0, _d3Selection.select)(\"div.\".concat(className)).append(\"svg\").attr(\"width\", layout.size()[0]).attr(\"height\", layout.size()[1]).append(\"g\").attr(\"transform\", \"translate(\".concat(layout.size()[0] / 2, \",\").concat(layout.size()[1] / 2, \")\")).selectAll(\"text\").data(words).enter().append(\"text\").style(\"font-size\", function (d) {\n      return \"\".concat(d.size, \"px\");\n    }).style(\"font-family\", font).style(\"fill\", fillColor).style(\"font-weight\", fontWeight).attr(\"text-anchor\", \"middle\").attr(\"transform\", function (d) {\n      return \"translate(\".concat([d.x, d.y], \")rotate(\").concat(d.rotate, \")\");\n    }).text(function (d) {\n      return d.text;\n    });\n\n    if (onWordClick) {\n      texts.on(\"click\", onWordClick);\n    }\n\n    if (onWordMouseOver) {\n      texts.on(\"mouseover\", onWordMouseOver);\n    }\n\n    if (onWordMouseOut) {\n      texts.on(\"mouseout\", onWordMouseOut);\n    }\n  });\n  (0, _react.useEffect)(function () {\n    layout.start();\n  }, [data]); // convert svg to base64 image\n\n  var loadPngData = function loadPngData(_ref) {\n    var context = _ref.context,\n        dataImg = _ref.dataImg,\n        format = _ref.format,\n        canvas = _ref.canvas;\n    return new Promise(function (resolve, reject) {\n      var image = new Image();\n\n      image.onload = function () {\n        context.clearRect(0, 0, width || defaultProps.width, height || defaultProps.height);\n        context.drawImage(image, 0, 0, width || defaultProps.width, height || defaultProps.height);\n        var pngData = canvas.toDataURL(\"image/\" + format);\n        return resolve(pngData);\n      };\n\n      image.src = dataImg;\n    });\n  };\n\n  (0, _react.useImperativeHandle)(ref, function () {\n    return {\n      toBase64Image: function toBase64Image() {\n        return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n          var format, imgString, dataImg, canvas, context, data;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  format = formatImgDownload ? formatImgDownload : defaultProps.formatImgDownload;\n                  imgString = new XMLSerializer().serializeToString(svgRef.current.querySelector(\"svg\"));\n                  dataImg = \"data:image/svg+xml;base64,\".concat(window.btoa(imgString));\n                  canvas = document.createElement(\"canvas\");\n                  context = canvas.getContext(\"2d\");\n                  canvas.width = width || defaultProps.width;\n                  canvas.height = height || defaultProps.height;\n                  _context.next = 9;\n                  return loadPngData({\n                    dataImg: dataImg,\n                    context: context,\n                    format: format,\n                    canvas: canvas\n                  });\n\n                case 9:\n                  data = _context.sent;\n                  return _context.abrupt(\"return\", data);\n\n                case 11:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))();\n      }\n    };\n  }); // render based on new data\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: className,\n    ref: svgRef\n  });\n});\nvar _default = WordCloud;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}